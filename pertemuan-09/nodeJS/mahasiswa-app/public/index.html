<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Dashboard</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet">
    <style>
        body {
            background: #f4f6f8;
            font-family: 'Roboto', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .card {
            background: #fff;
            padding: 2rem 2.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.08);
            min-width: 500px;
        }
        h2 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: #2d3a4b;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
        }
        th, td {
            padding: 0.6rem 0.7rem;
            border-bottom: 1px solid #f0f0f0;
            text-align: left;
        }
        th {
            color: #4f8cff;
        }
        .actions a {
            margin-right: 0.5rem;
            color: #2563eb;
            text-decoration: none;
            font-weight: 500;
        }
        .add-btn {
            display: block;
            width: 100%;
            padding: 0.8rem 1rem;
            background: #4f8cff;
            color: #fff;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            margin-bottom: 1rem;
            transition: background 0.2s;
        }
        .add-btn:hover {
            background: #2563eb;
        }
    </style>
</head>
<body>
<div class="card">
    <h2>Dashboard Mahasiswa</h2>
    <a href="tambah.html" class="add-btn">Tambah Mahasiswa</a>
    <table id="mahasiswaTable">
        <thead>
        <tr>
            <th>NPM</th>
            <th>Nama</th>
            <th>Jurusan</th>
            <th>Tahun Masuk</th>
            <th>Kelas</th>
            <th>Aksi</th>
        </tr>
        </thead>
        <tbody>
        <!-- Data will be inserted here -->
        </tbody>
    </table>
</div>
<script>
    async function loadMahasiswa() {
        const res = await fetch('http://localhost:3000/mahasiswa');
        const data = await res.json();
        const tbody = document.querySelector('#mahasiswaTable tbody');
        tbody.innerHTML = '';
        if (Array.isArray(data) && data.length > 0) {
            data.forEach(m => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${m.npm}</td>
                    <td>${m.nama}</td>
                    <td>${m.jurusan}</td>
                    <td>${m.tahunMasuk}</td>
                    <td>${m.kelas}</td>
                    <td class="actions">
                        <a href="detail.html?npm=${m.npm}">Detail</a>
                        <a href="edit.html?npm=${m.npm}">Edit</a>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        } else {
            tbody.innerHTML = '<tr><td colspan="6" style="text-align:center;color:#888;">Tidak ada data.</td></tr>';
        }
    }
    loadMahasiswa();
</script>
</body>
</html>